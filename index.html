<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<style>
    html, body {
        margin: 0; padding: 0; overflow: hidden; 
        width: 100vw; height: 100vh;
        background: black;
        font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Segoe UI", sans-serif;
    }
    #black-bg {
        position: fixed; top: 0; left: 0;
        width: 100vw; height: 100vh;
        background: black;
        z-index: 0;
        pointer-events: none;
    }
    canvas {
        position: fixed; top: 0; left: 0;
        width: 100vw; height: 100vh;
        z-index: 1;
    }
    #overlay {
        position: fixed; top: 0; left: 0;
        width: 100vw; height: 100vh;
        background: black;
        z-index: 9999;
        pointer-events: none;
    }
    #respring {
        position: fixed;
        left: 20px;
        bottom: 20px;
        z-index: 10000;
        padding: 12px 24px;
        font-size: 16px;
        font-weight: 500;
        color: #333;
        background-color: #f8f8f8;
        border: 1px solid #ccc;
        border-radius: 16px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        cursor: pointer;
        transition: background-color 0.2s, box-shadow 0.2s;
    }
    #respring:hover {
        background-color: #e0e0e0;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
</style>
</head>
<body>
    <div id="black-bg"></div>
    <canvas id="canvas"></canvas>
    <div id="overlay"></div>
    <button id="respring">Respring</button>

<script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    let w = canvas.width = window.innerWidth;
    let h = canvas.height = window.innerHeight;
    const layers = [];

    function addCrazyLayer() {
        const div = document.createElement('div');
        div.style.position = 'absolute';
        div.style.top = '0'; div.style.left = '0';
        div.style.width = w + 'px';
        div.style.height = h + 'px';
        div.style.pointerEvents = 'none';
        div.style.background = `conic-gradient(
            from 0deg,
            hsl(${Math.random()*360},100%,50%) 0deg 60deg,
            hsl(${(Math.random()*360+120)%360},100%,50%) 60deg 120deg,
            hsl(${(Math.random()*360+240)%360},100%,50%) 120deg 180deg,
            hsl(${Math.random()*360},100%,50%) 180deg 240deg,
            hsl(${(Math.random()*360+120)%360},100%,50%) 240deg 300deg,
            hsl(${(Math.random()*360+240)%360},100%,50%) 300deg 360deg
        )`;
        div.style.mixBlendMode = 'difference';
        div.style.zIndex = '2';
        div._angle = 0;
        div._blur = 5 + Math.random() * 10;
        div._saturate = 3000;
        div._invert = Math.random() > 0.5 ? 1 : 0;
        layers.push(div);
        document.body.appendChild(div);
    }

    function spamLayersLoop() {
        for(let i=0; i<5; i++) addCrazyLayer();
        setTimeout(spamLayersLoop);
    }

    let shake = 0;
    function heavyDraw() {
        ctx.clearRect(0, 0, w, h);
        shake = (shake + 0.5) % 20;
        const offsetX = Math.sin(shake) * 15;
        const offsetY = Math.cos(shake) * 15;
        ctx.setTransform(1, 0, 0, 1, offsetX, offsetY);
        ctx.fillStyle = 'black';
        ctx.fillRect(0, 0, w, h);
        for(let i=0; i<1500; i++) {
            const hue = (Math.random()*360 + shake*10) % 360;
            ctx.fillStyle = `hsl(${hue}, 100%, 50%)`;
            ctx.beginPath();
            ctx.arc(Math.random()*w, Math.random()*h, Math.random()*70, 0, Math.PI*2);
            ctx.fill();
        }
        requestAnimationFrame(heavyDraw);
    }

    function animateLayers() {
        layers.forEach(div => {
            div._angle += 5 + Math.random()*10;
            if(div._angle > 360) div._angle -= 360;
            div._blur += (Math.random()-0.5)*2;
            if(div._blur < 3) div._blur = 3;
            if(div._blur > 15) div._blur = 15;
            div._saturate += (Math.random()-0.5)*100;
            if(div._saturate < 1000) div._saturate = 1000;
            if(div._saturate > 5000) div._saturate = 5000;
            div._invert = div._invert === 1 ? 0 : 1;
            div.style.transform = `rotate(${div._angle}deg) scale(20)`;
            div.style.filter = `
                blur(${div._blur}px)
                saturate(${div._saturate}%)
                contrast(20)
                invert(${div._invert})
                brightness(2)
            `;
        });
        requestAnimationFrame(animateLayers);
    }

    document.getElementById("respring").addEventListener("click", () => {
        document.getElementById("respring").remove();
        heavyDraw();
        spamLayersLoop();
        animateLayers();
    });

    window.addEventListener('resize', () => {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        layers.forEach(div => {
            div.style.width = w + 'px';
            div.style.height = h + 'px';
        });
    });
</script>
</body>
</html>
